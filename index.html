<!DOCTYPE html>
<html>

<head>
	<title>Charm Studies lite</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="css/reset.css" />
	<link rel="stylesheet" type="text/css" href="css/picross.css" />
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap"
		rel="stylesheet">
	<link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="image2/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
	<link rel="manifest" href="images/site.webmanifest">
	<link rel="mask-icon" href="images/safari-pinned-tab.svg" color="#5bbad5">
	<link rel="shortcut icon" href="images/favicon.ico">
	<meta name="msapplication-TileColor" content="#b91d47">
	<meta name="msapplication-config" content="images/browserconfig.xml">
	<meta name="theme-color" content="#ffffff">
</head>

<body>
	<div class="container">
		<div class="header">
			you have studied charms for
			<span class="highlight" id="totalPlaytimeDisplay">xm</span>
			<script>
				var totalTimeout, totalPlaytime, totalDays, totalHours, totalMinutes;

				function timeFormat() {
					totalTimeText = "";
					totalDays = Math.floor(totalPlaytime/86400);
					totalHours = Math.floor((totalPlaytime%86400)/3600);
					totalMinutes = Math.floor(((totalPlaytime % 86400)%3600)/60);
					if (totalDays) {
						totalTimeText = totalDays + "d ";
					}
					if (totalHours) {
						totalTimeText = totalTimeText + totalHours + "h ";
					}
					totalTimeText = totalTimeText + totalMinutes + "m";
					return totalTimeText;
				}

				function playtimeIncrement() {
					totalPlaytime = setLocalStorage('charmStudiesLite.totalPlaytime', totalPlaytime += 1);
					totalTimer = document.getElementById('totalPlaytimeDisplay');
					totalTimer.innerHTML = timeFormat();
					totalTimeout = setTimeout('playtimeIncrement()', 1000);
				}

				function setLocalStorage(key, val) {
					if (window.localStorage) {
						window.localStorage.setItem(key, val);
					}
					return val;
				}

				function getLocalStorage(key) {
					return window.localStorage ? window.localStorage.getItem(key) : '';
				}
			</script>
			<span style="font-size: 16px">(<span class="highlight" id="sessionTimer">00:00:00</span> this session)</span>
			<script>
				/* Source: https://codepen.io/Uhiriwe/pen/pqVLvK */
				var clearTime;
				var seconds = 0,
					minutes = 0,
					hours = 0;
				var secs, mins, hrs;

				function startWatch() {
					/* convert 60 seconds to 1 minute */
					if (seconds === 60) {
						seconds = 0;
						minutes = minutes + 1;
					}

					/* 0 padding minutes if not two digits */
					mins = minutes < 10 ? "0" + minutes + ":" : minutes + ":";
					/* convert 60 minutes to 1 hour */
					if (minutes === 60) {
						minutes = 0;
						hours = hours + 1;
					}

					/* 0 padding hours & seconds if not two digits */
					hrs = hours < 10 ? "0" + hours + ":" : hours + ":";
					secs = seconds < 10 ? "0" + seconds : seconds;

					/* display count-up */
					var x = document.getElementById("sessionTimer");
					x.innerHTML = hrs + mins + secs;

					seconds++;

					/* call async timeout to run in background */
					clearTime = setTimeout("startWatch( )", 1000);
				}
			</script>
		</div>
		<div class="controls">
			<h1 class="title">
				Charm Studies lite
			</h1>
			<div class="control-group">
				<h3>progress</h3>
				<span class="notable" id="progress">0.0%</span>
				<div class="custom"></div>
				<button id="solve" onclick="pauseCharmTimer();">finish charm!</button>
			</div>
			<div class="control-group">
				<h3>settings</h3>
				<div class="control-section">
					<input type="checkbox" id="dark" />
					<label for="dark"
						title="switches between light and dark mode!&#010;light theme takes the original charm studies colour scheme, with dark mode being the luminous opposite."
						style="text-decoration: dotted underline;"> dark mode</label><br />
					<input type="checkbox" id="easy" checked />
					<label for="easy"
						title="toggles crossouts (which keep track of which columns/rows you've completed),&#010;and toggles sums (which can be used for logical deduction).&#010;&#010;highly recommended!"
						style="text-decoration: dotted underline;"> easy mode</label>
				</div>
				<select id="dimensions">
					<option value="5x5">5x5</option>
					<option value="10x5">10x5</option>
					<option value="10x10">10x10</option>
					<option value="15x10">15x10</option>
					<option value="15x15">15x15</option>
					<option value="20x15">20x15</option>
					<option value="20x20">20x20</option>
					<option value="25x20">25x20</option>
					<option value="25x25">25x25</option>
					<option value="30x25">30x25</option>
					<option value="30x30">30x30</option>
				</select>
				<span>charm size</span>
			</div>
			<div class="control-group">
				<button id="new" onclick="resetCharmTimer();">new charm &raquo;</button>
				<div class="custom">
					<h5>charm id</h5>
					<input type="text" id="seed" readonly="readonly" />
					<h5>custom id</h5>
					<form id="customForm">
						<input type="text" id="customSeed" />
						<button type="submit" onclick="resetCharmTimer();" id="customGame">custom charm</button>
					</form>
				</div>
			</div>
		</div>
		<div class="stats">
			<h1 class="title">stats</h1>
			<div class="control-group">
				<h3>time</h3>
				<span class="stat" id="charmTimer">xx:xx</span>
				<script>
					var charmClearTime, timerSeconds, timerMinutes, charmSecs, charmMins;
					var theCharmTimer = document.getElementById("charmTimer");

					window.onload = function () {
						totalPlaytime = Number(getLocalStorage('charmStudiesLite.totalPlaytime')) || 0;
						timeFormat();
						startWatch();
						playtimeIncrement();
						initCharmTimer();
					};

					function resumingHandler() {
						if (document.getElementById("puzzle").classList.contains("complete")) {
							pauseCharmTimer();
						} else {
							startCharmTimer();
						}
					}

					function initCharmTimer() {
						charmClearTime = getLocalStorage('charmStudiesLite.charmClearTime') || undefined;
						timerSeconds = Number(getLocalStorage('charmStudiesLite.timerSeconds')) || 0;
						timerMinutes = Number(getLocalStorage('charmStudiesLite.timerMinutes')) || 0;
						charmSecs = getLocalStorage('charmStudiesLite.charmSecs') || "00";
						charmMins = getLocalStorage('charmStudiesLite.charmMins') || "00:";
						resumingHandler();
					}

					function setLocalStorage(key, val) {
						if (window.localStorage) {
							window.localStorage.setItem(key, val);
						}
						return val;
					}

					function getLocalStorage(key) {
						return window.localStorage ? window.localStorage.getItem(key) : '';
					}

					function startCharmTimer() {
						if (timerSeconds === 60) {
							timerSeconds = 0;
							timerMinutes += 1;
							setLocalStorage('charmStudiesLite.timerSeconds', timerSeconds);
							setLocalStorage('charmStudiesLite.timerMinutes', timerMinutes);
						}

						charmMins = timerMinutes < 10 ? "0" + timerMinutes + ":" : timerMinutes + ":";
						charmSecs = timerSeconds < 10 ? "0" + timerSeconds : timerSeconds;

						theCharmTimer.innerHTML = charmMins + charmSecs;
						setLocalStorage('charmStudiesLite.charmMins', charmMins);
						setLocalStorage('charmStudiesLite.charmSecs', charmSecs);

						timerSeconds += 1;
						setLocalStorage('charmStudiesLite.timerSeconds', timerSeconds);

						charmClearTime = setTimeout(startCharmTimer, 1000);
					}

					function pauseCharmTimer() {
						let stopCharmTime = charmMins + charmSecs;
						theCharmTimer.innerHTML = stopCharmTime;
						clearTimeout(charmClearTime);
					}

					function resetCharmTimer() {
						timerSeconds = 0;
						timerMinutes = 0;
						charmSecs = "00";
						charmMins = "00:";

						setLocalStorage('charmStudiesLite.timerSeconds', timerSeconds);
						setLocalStorage('charmStudiesLite.timerMinutes', timerMinutes);
						setLocalStorage('charmStudiesLite.charmSecs', charmSecs);
						setLocalStorage('charmStudiesLite.charmMins', charmMins);

						clearTimeout(charmClearTime);
						startCharmTimer();
					}

					function galleryReset() {
						if (document.getElementById("original-charms").value != "default") {
							resetCharmTimer();
						}
					}
				</script>
				<div class="custom"></div>
				<h3>streak</h3>
				<span class="stat" id="perfectStreak">x</span>
				<div class="custom"></div>

				<h3>perfect charms</h3>
				<span class="stat"><span class="stat" id="perfectCharms">x</span>/<span class="stat" id="completeCharms">x</span> (<span class="stat" id="pcRatio">xx.x%</span>)</span>
			</div>
			<h1 class="title">other</h1>
			<div class="control-group">
				<h3>charm gallery</h3>
				<form id="charm-gallery">
					<select name="original-charms" id="original-charms">
						<option hidden disabled selected value="default">select charm</option>
						<optgroup label="nami's charms!" style="text-align: center;">
							<hr />
							<hr />
						<optgroup label="5x5"> </optgroup>
						<option value="Astral Magic">Astral Magic</option>
						<option value="Temporal Magic">Temporal Magic</option>
						<option value="Spatial Magic">Spatial Magic</option>
						<option value="Sweets!">Sweets!</option>
						<option value="Love &lt;3">Love &lt;3</option>
						</optgroup>
						<hr />

						<optgroup label="10x10"> </optgroup>
						<option value="Connection Magic">Connection Magic</option>
						<option value="Illusion Magic">Illusion Magic</option>
						<option value="Growth Magic">Growth Magic</option>
						<option value="Kitty~">Kitty~</option>
						<option value="Charm Book">Charm Book</option>
						<option value="Cute Staff">Cute Staff</option>
						<hr />

						<optgroup label="15x15"> </optgroup>
						<option value="Magic Circle">Magic Circle</option>
						<option value="Broomstick">Broomstick</option>
						<option value="Senna &lt;3">Senna &lt;3</option>
						<option value="Me!">Me!</option>
						<hr />
						<hr />


						<optgroup label="other nami works &lt;3" style="text-align: center;"></optgroup>
						<hr />
						<hr />
						<optgroup label="BAD END THEATER"> </optgroup>
						<hr />
						<option value="HERO">HERO</option>
						<option value="MAIDEN">MAIDEN</option>
						<option value="UNDERLING">UNDERLING</option>
						<option value="OVERLORD">OVERLORD</option>
						<option value="TRAGEDY">TRAGEDY</option>
						<hr />

						<optgroup label="Starry Flowers"> </optgroup>
						<hr />
						<option value="Starry Flowers">Starry Flowers</option>
						<option value disabled style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;(icon)</option>
						<option value="Pastille">Pastille</option>
						<option value="Periwinkle">Periwinkle</option>
						<option value="Astragalus">Astragalus</option>
						<hr />

						<optgroup label="Contract Demon"></optgroup>
						<hr />
						<option value="Kamila">Kamila</option>
						<option value="Eleni">Eleni</option>
					</select>
					<button type="submit" onclick="galleryReset();" id="galleryStudy">study charm~</button>
				</form>
				<div class="custom"></div>
				<h3>debug</h3>
				<button id="AAAAA" onclick="localStorage.clear(); location.reload();">clear storage</button>
				<button id="statReset">stat reset</button>
			</div>
		</div>
		<div id="puzzle">if you're seeing this, something's gone wrong! please press the clear storage in the debug
			section.<br />unfortunately, this resets board and stat progression, sorry (&gt;.&lt;)
			<br /><br />this may happen on your first time loading the website, since new internal features were added
			the original site doesn't load by default, don't be alarmed if so
		</div>
	</div>
	<div class="footer">
		randomly generated <a href="http://en.wikipedia.org/wiki/Nonogram" target="_blank">picross puzzles.</a> original
		designed and written by <a href="http://liouh.com/home/">Henry Liou</a>.
		<br />edited by <a href="https://torinitei.carrd.co/">Torinitei</a>. themed after <a
			href="https://nomnomnami.com/">NomNomNami's</a> <a href="https://nomnomnami.itch.io/charm-studies">Charm
			Studies</a>.<br />
		left click tiles to paint, right click to cross out, middle click to mark (highlight). drag to select multiple
		at once.<br /><br />
		<iframe type="text/html"
			src="https://www.youtube-nocookie.com/embed/N-plwzKHSc8?autoplay=1&loop=1&modestbranding=1&rel=0&iv_load_policy=3&fs=0&playlist=N-plwzKHSc8"
			width="320" height="180" title="Charm Studies OST ~ magical beats to study to ~" frameborder="0"
			allow="autoplay">
		</iframe>
	</div>
	<script type="text/javascript" src="js/jquery-1.8.3.js"></script>
	<script type="text/javascript" src="js/underscore.js"></script>
	<script type="text/javascript" src="js/backbone.js"></script>
	<script type="text/javascript" src="js/seedrandom.js"></script>
	<script type="text/javascript" src="js/picross.js"></script>
</body>

</html>